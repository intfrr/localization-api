--liquibase formatted sql

--changeset maruf:1542189426403-1
CREATE TABLE LANGUAGE (id VARCHAR(32) NOT NULL, tenant VARCHAR(255) NOT NULL, code VARCHAR(255) NULL, isActive TINYINT(3) NULL, isRtl TINYINT(3) NULL, name VARCHAR(255) NULL, project_id VARCHAR(32) NULL);

--changeset maruf:1542189426403-2
CREATE TABLE LOCALIZATION_KEY (id VARCHAR(32) NOT NULL, tenant VARCHAR(255) NOT NULL, langKey VARCHAR(255) NOT NULL, project_id VARCHAR(32) NULL);

--changeset maruf:1542189426403-3
CREATE TABLE LOCALIZATION_VALUE (id VARCHAR(32) NOT NULL, tenant VARCHAR(255) NOT NULL, value TEXT NOT NULL, language_id VARCHAR(32) NULL, localizationKey_id VARCHAR(32) NULL);

--changeset maruf:1542189426403-4
CREATE TABLE PROJECT (id VARCHAR(32) NOT NULL, tenant VARCHAR(255) NOT NULL, code VARCHAR(255) NOT NULL, description VARCHAR(255) NULL, name VARCHAR(255) NOT NULL, url VARCHAR(255) NULL);

--changeset maruf:1542189426403-5
CREATE TABLE ROLE (id VARCHAR(32) NOT NULL, name VARCHAR(255) NULL);

--changeset maruf:1542189426403-6
CREATE TABLE TENANT (id VARCHAR(255) NOT NULL, name VARCHAR(255) NULL, url VARCHAR(255) NULL);

--changeset maruf:1542189426403-7
CREATE TABLE USER (id VARCHAR(32) NOT NULL, tenant VARCHAR(255) NOT NULL, email VARCHAR(50) NULL, ENABLED BIT(1) NULL, firstName VARCHAR(50) NULL, lastName VARCHAR(50) NULL, lastPasswordResetDate datetime(6) NULL, password VARCHAR(200) NULL);

--changeset maruf:1542189426403-8
CREATE TABLE USER_ROLE (USER_ID VARCHAR(32) NOT NULL, ROLE_ID VARCHAR(32) NOT NULL);

--changeset maruf:1542189426403-9
ALTER TABLE LANGUAGE ADD PRIMARY KEY (id);

--changeset maruf:1542189426403-10
ALTER TABLE LOCALIZATION_KEY ADD PRIMARY KEY (id);

--changeset maruf:1542189426403-11
ALTER TABLE LOCALIZATION_VALUE ADD PRIMARY KEY (id);

--changeset maruf:1542189426403-12
ALTER TABLE PROJECT ADD PRIMARY KEY (id);

--changeset maruf:1542189426403-13
ALTER TABLE ROLE ADD PRIMARY KEY (id);

--changeset maruf:1542189426403-14
ALTER TABLE TENANT ADD PRIMARY KEY (id);

--changeset maruf:1542189426403-15
ALTER TABLE USER ADD PRIMARY KEY (id);

--changeset maruf:1542189426403-16
ALTER TABLE USER_ROLE ADD PRIMARY KEY (USER_ID, ROLE_ID);

--changeset maruf:1542189426403-17
ALTER TABLE LOCALIZATION_KEY ADD CONSTRAINT UK5e4v7evb912lklca0kyho4nta UNIQUE (langKey, project_id);

--changeset maruf:1542189426403-18
ALTER TABLE TENANT ADD CONSTRAINT UK_4jw4mvo451xouioqb2ia66muh UNIQUE (name);

--changeset maruf:1542189426403-19
ALTER TABLE TENANT ADD CONSTRAINT UK_bvrgi8yx4ipojbacfxf680pgs UNIQUE (url);

--changeset maruf:1542189426403-20
ALTER TABLE USER ADD CONSTRAINT UK_oso07pudw19e66bs4yp8hwpux UNIQUE (email);

--changeset maruf:1542189426403-21
ALTER TABLE LOCALIZATION_VALUE ADD CONSTRAINT UKjhf7f61ecbitl1kceeobapqim UNIQUE (localizationKey_id, language_id);

--changeset maruf:1542189426403-22
ALTER TABLE PROJECT ADD CONSTRAINT UKs6b4km9ah2wu2wurbdjlu8gp5 UNIQUE (tenant, code);

--changeset maruf:1542189426403-23
CREATE INDEX FKn1rn9qodd3u4le8uf3kl33qe3 ON USER_ROLE(ROLE_ID);

--changeset maruf:1542189426403-24
CREATE INDEX idx_language ON LANGUAGE(project_id);

--changeset maruf:1542189426403-25
CREATE INDEX idx_localization ON LOCALIZATION_KEY(project_id);

--changeset maruf:1542189426403-26
CREATE INDEX idx_localization_value ON LOCALIZATION_VALUE(language_id);

--changeset maruf:1542189426403-27
ALTER TABLE LOCALIZATION_VALUE ADD CONSTRAINT FK10k41aa940jshcsof1knvykk8 FOREIGN KEY (localizationKey_id) REFERENCES LOCALIZATION_KEY (id) ON UPDATE NO ACTION ON DELETE NO ACTION;

--changeset maruf:1542189426403-28
ALTER TABLE LOCALIZATION_KEY ADD CONSTRAINT FK6sogxmklqxy665culmvi40koa FOREIGN KEY (project_id) REFERENCES PROJECT (id) ON UPDATE NO ACTION ON DELETE NO ACTION;

--changeset maruf:1542189426403-29
ALTER TABLE LANGUAGE ADD CONSTRAINT FK9pikmp69uwjqvdqysyqbagq2a FOREIGN KEY (project_id) REFERENCES PROJECT (id) ON UPDATE NO ACTION ON DELETE NO ACTION;

--changeset maruf:1542189426403-30
ALTER TABLE USER_ROLE ADD CONSTRAINT FKa8x5mvctia7u43u2mm3hyy5bm FOREIGN KEY (USER_ID) REFERENCES USER (id) ON UPDATE NO ACTION ON DELETE NO ACTION;

--changeset maruf:1542189426403-31
ALTER TABLE LOCALIZATION_VALUE ADD CONSTRAINT FKjyyhwcy7v9wtjpdoxgpknj0j7 FOREIGN KEY (language_id) REFERENCES LANGUAGE (id) ON UPDATE NO ACTION ON DELETE NO ACTION;

--changeset maruf:1542189426403-32
ALTER TABLE USER_ROLE ADD CONSTRAINT FKn1rn9qodd3u4le8uf3kl33qe3 FOREIGN KEY (ROLE_ID) REFERENCES ROLE (id) ON UPDATE NO ACTION ON DELETE NO ACTION;

